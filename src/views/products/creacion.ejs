<!DOCTYPE html>
<html lang="en">
    <!-- head -->
  <%- include('../partials/head.ejs', {title: 'Nuevo producto'}) %>

  <body>
     
    <%- include('../partials/header.ejs') %>
    <main>
      <form action="/crear" method="post" class="container" enctype="multipart/form-data" style="margin-top: 180px; margin-bottom: 48px;">
        <div class="mb-3">
          <label for="titulo" class="form-label">Título</label>
          <input type="text" class="form-control" id="titulo" name="titulo" aria-describedby="emailHelp">
        </div>

        <div class="input-group mb-3">
          <input type="file" class="form-control" id="imagen" name="imagen">
          <label class="input-group-text" for="imagen">Imagen</label>
        </div>

        <div class="mb-3">
          <label for="descripcion" class="form-label">Descipción</label>
          <input type="text" class="form-control" id="descripcion" name="descripcion" aria-describedby="emailHelp">
        </div>

        <div class="mb-3">
          <label for="categoria" class="form-label">Categoría</label>
          <select name="categoria">
            <option value=""></option>
            <% for (categoria of categorias) { %>
              <option value="<%= categoria.id %>">
                <%= categoria.nombre %>
              </option>
            <% } %>
          </select>
        </div>             
       
        <div class="mb-3">
          <label for="precio" class="form-label">Precio</label>
          <input type="text" class="form-control" id="precio" name="precio" aria-describedby="emailHelp">
        </div>

        <button type="submit" class="btn btn-primary">Agregar</button>
      </form>
    </main>

    <script>
      document.getElementById("productForm").addEventListener("submit", function(event) {
          let titulo = document.getElementById("titulo").value;
          let precio = document.getElementById("precio").value;
          let descripcion = document.getElementById("descripcion").value;

          if (nombre === "" || precio === "" || descripcion === "") {
              alert("Todos los campos son obligatorios");
              event.preventDefault(); // Evita que se envíe el formulario
          }

          if (isNaN(precio)) {
              alert("El precio debe ser un número válido");
              event.preventDefault();
          }
      });
  </script>

    <%- include('../partials/footer.ejs') %>
  </body>
</html>